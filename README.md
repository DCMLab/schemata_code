# Schema Recognition (ISMIR 2020 Version)

## Introduction

Voice-leading schemata are important building blocks in tonal music.
In the context of this project they are characterized as sets of voices
that move in a coordinated way through a number of stages.
On the musical surface, this structure can be ornamented and elaborated,
so a major challenge is to discover (and/or annotate)
the skeleton of a schema in the music.

## Setup

This repository contains Julia code and notebooks for the 2020 ISMIR paper
"Voice-Leading Schema Recognition Using Rhythm and Pitch Features".
To use it, clone this repo and check out it's submodules (which contain the data).

A [Julia installation](https://julialang.org/downloads/) is required for running the code.
The dependencies of the code can be installed by running `julia` inside its top-level directory,
pressing `]` to enter the package manager mode, and typing

``` julia-repl
(v1.x) pkg> activate .
(Polygrams) pkg> instantiate
```

or alternatively running the main notebook,
which includes these steps (this might take a while).

The first command activates the repo's *environment*.
The second command downloads all dependencies such as
[DigitalMusicology.jl](https://github.com/DCMLab/DigitalMusicology.jl)
in the version specified in this package.

### Notebooks

There are two notebooks that contain the procedure that was used to
generate parts of the dataset and run the analyses presented in the paper.

`notebooks/ismir2020_classification.ipynb` was used to generate
all results and plots shown in the paper.
It can be run as it is to regenerate all results.
Mind that the exact results may vary slightly due to randomization,
but the qualitative results will be similar to what is reported.
The plots generated by the notebook use `PGFPlots`, which requires a workin LaTeX installation.
If LaTeX is not available, change the line `pgfplotsx()` in the second cell to
either `gr()` or `plotlyjs()` to select a different plotting backend.

For convenience, a HTML version of the notebook is included as
`notebooks/ismir2020_classification.html`

`notebooks/autoannot.ipynb` is the notebook that was used to generate
the automatic schema candidates.
It is included for completeness, but it is not recommended to run it without inspection,
as it may require some manual intervention and uses a high amount of computational resources.
